import{d as h,c as g,o as d,a as t,w as n,u as e,b as c,x as v,C as w,B as _,v as O,n as M,F as $,A as S,r as k,J as V,K as i,y as H,I as Y,i as Q,k as W,h as X}from"./app-Ck0_Oz6D.js";import{_ as B,C as Z,a as G,b as P,c as z,d as J,k as ee,A as te}from"./AppLayout-D6CGHXZO.js";import{_ as T}from"./Checkbox.vue_vue_type_script_setup_true_lang-EGv8aF6C.js";import{c as se,f as ae,v as F}from"./utils-CnVfeQtM.js";import{c as le,_ as b}from"./index-DrcL8KoG.js";import{A,a as E,C as ne,b as oe,R as re}from"./refresh-ccw-CSk0XjQX.js";import{a as ie,b as de,c as ue,d as ce,_ as me}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-DEm-3iQx.js";import{_ as pe}from"./DialogFooter.vue_vue_type_script_setup_true_lang-BcCAPyH_.js";import{t as D}from"./index-LxG5FLxo.js";import{_ as fe}from"./_plugin-vue_export-helper-DFpy9yx9.js";import{E as ge}from"./ellipsis-BxSMAEbM.js";import{u as _e,F as K,g as ve,a as we,b as be,c as xe,d as ye,e as $e}from"./index-CkKMMlrv.js";import{d as Ce,_ as he,a as Se,c as N,b as I,e as ke}from"./TableHeader.vue_vue_type_script_setup_true_lang-DYXfyqRu.js";import{_ as Pe,a as Fe,b as Ve,c as Re,d as De}from"./SelectValue.vue_vue_type_script_setup_true_lang-w7OKlDAx.js";import{C as Ie}from"./chevron-left-LQZGwieH.js";import{C as Me}from"./chevron-right-PcGgRnqa.js";import{_ as Oe}from"./Input.vue_vue_type_script_setup_true_lang-CgtFYhle.js";import{_ as Te,a as Ae,b as q,c as U}from"./TabsTrigger.vue_vue_type_script_setup_true_lang-NchP6aqD.js";import"./index-BNYgcxdN.js";import"./createContext-DUWa75Un.js";import"./Primitive-B0P0Cbkr.js";import"./VisuallyHidden-C0I93g3R.js";import"./useForwardExpose-DuyzoFiO.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-BpOb4CbK.js";import"./Collection-DGRyn5kX.js";import"./PopperContent-DhHBm_MV.js";import"./useTypeahead-B3MrhPxq.js";import"./RovingFocusGroup-iINgKn9K.js";import"./check-BGLMj-b2.js";import"./RovingFocusItem-DhKJ5z_J.js";import"./VisuallyHiddenInput-KcCq5A4F.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=le("PrinterIcon",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),Ke={inheritAttrs:!1},y=h({...Ke,__name:"DataTableColumnHeader",props:{column:{},title:{}},setup(s){return(l,a)=>l.column.getCanSort()?(d(),g("div",{key:0,class:O(e(se)("flex items-center space-x-2",l.$attrs.class??""))},[t(e(J),null,{default:n(()=>[t(e(B),{"as-child":""},{default:n(()=>[t(e(b),{variant:"ghost",size:"sm",class:"-ml-3 h-8 data-[state=open]:bg-accent"},{default:n(()=>[c("span",null,w(l.title),1),l.column.getIsSorted()==="desc"?(d(),v(e(A),{key:0,class:"ml-2 h-4 w-4"})):l.column.getIsSorted()==="asc"?(d(),v(e(E),{key:1,class:"ml-2 h-4 w-4"})):(d(),v(e(Z),{key:2,class:"ml-2 h-4 w-4"}))]),_:1})]),_:1}),t(e(G),{align:"start"},{default:n(()=>[t(e(P),{onClick:a[0]||(a[0]=o=>l.column.toggleSorting(!1))},{default:n(()=>[t(e(E),{class:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),a[2]||(a[2]=_(" Asc ",-1))]),_:1}),t(e(P),{onClick:a[1]||(a[1]=o=>l.column.toggleSorting(!0))},{default:n(()=>[t(e(A),{class:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),a[3]||(a[3]=_(" Desc ",-1))]),_:1}),t(e(z))]),_:1})]),_:1})],2)):(d(),g("div",{key:1,class:O(l.$attrs.class)},w(l.title),3))}}),Ne={class:"ticket-container print-only"},qe={class:"text-xs leading-tight"},Ue={class:"text-xs leading-snug"},Le=h({__name:"KitchenTicket",props:{itemData:{type:Object,required:!0}},setup(s){const l=s;return M(()=>{if(l.itemData.time_sent){const a=l.itemData.time_sent.split(":");return`${a[0]}:${a[1]}`}return""}),(a,o)=>(d(),g("div",Ne,[c("div",qe,[(d(!0),g($,null,S(s.itemData,p=>(d(),g("div",null," ("+w(p.quantity)+") "+w(p.name),1))),256))]),c("div",Ue,[o[0]||(o[0]=c("p",{class:"font-bold"},"** ITEM NOTES:",-1)),c("p",null,w(s.itemData.note||"(No special requests/notes)"),1)])]))}}),je=fe(Le,[["__scopeId","data-v-aa432f3a"]]),He=h({__name:"DataTableRowActions",props:{row:{}},setup(s){const l=s,a=M(()=>({...l.row.original})),o=k(!1),p=()=>{V.delete(`/orders/${a.value.id}`,{onSuccess:()=>{o.value=!1,D.success("Order Voided")}})},r=f=>{V.post("/orders/print",{order_id:f},{onSuccess:()=>{D.success("Order Sent to Printer")}})},m=f=>{V.post("/orders/complete",{order_id:f},{onSuccess:()=>{D.success("Order Completed")}})};return(f,u)=>(d(),g($,null,[t(e(J),null,{default:n(()=>[t(e(B),{"as-child":""},{default:n(()=>[t(e(b),{variant:"ghost",class:"h-8 w-8 p-0"},{default:n(()=>[u[2]||(u[2]=c("span",{class:"sr-only"},"Open menu",-1)),t(e(ge),{class:"h-4 w-4"})]),_:1})]),_:1}),t(e(G),{align:"end"},{default:n(()=>[t(e(ee),null,{default:n(()=>[...u[3]||(u[3]=[_("Actions",-1)])]),_:1}),t(e(P),{onClick:u[0]||(u[0]=C=>r(a.value.order_id))},{default:n(()=>[...u[4]||(u[4]=[_(" Print ",-1)])]),_:1}),t(e(P),{onClick:u[1]||(u[1]=C=>m(a.value.order_id))},{default:n(()=>[...u[5]||(u[5]=[_(" Complete ",-1)])]),_:1}),t(e(z)),t(e(P),{onClick:p},{default:n(()=>[...u[6]||(u[6]=[_(" Void ",-1)])]),_:1})]),_:1})]),_:1}),t(e(me),null,{default:n(()=>[t(e(ie),{"as-child":""},{default:n(()=>[t(e(b),{variant:"ghost",class:"p-1"},{default:n(()=>[t(e(Ee))]),_:1})]),_:1}),t(e(de),{class:"w-fit"},{default:n(()=>[t(e(ue),{class:"sr-only","aria-describedby":"kitchen-ticket"},{default:n(()=>[...u[7]||(u[7]=[_("Kitchen Ticket",-1)])]),_:1}),t(e(ce),null,{default:n(()=>[...u[8]||(u[8]=[_("Print Order Items",-1)])]),_:1}),c("div",null,[t(je,{"item-data":a.value.items},null,8,["item-data"])]),t(e(pe),null,{default:n(()=>[t(e(b),null,{default:n(()=>[...u[9]||(u[9]=[_("Print",-1)])]),_:1})]),_:1})]),_:1})]),_:1})],64))}}),L=[{id:"select",header:({table:s})=>i(T,{modelValue:s.getIsAllPageRowsSelected()||s.getIsSomePageRowsSelected()&&"indeterminate","onUpdate:modelValue":l=>s.toggleAllPageRowsSelected(!!l),ariaLabel:"Select all",class:"translate-y-0.5 flex space-x-2"}),cell:({row:s})=>i(T,{modelValue:s.getIsSelected(),"onUpdate:modelValue":l=>s.toggleSelected(!!l),ariaLabel:"Select row",class:"translate-y-0.5"})},{accessorKey:"order_number",header:({column:s})=>i(y,{column:s,title:"Order #",class:"w-[100px]"}),cell:({row:s})=>i("div",{class:"flex space-x-2"},[i("span",{class:" font-medium"},s.getValue("order_number"))])},{accessorKey:"device",header:({column:s})=>i(y,{column:s,title:"Device",class:"max-w-[100px]"}),enableColumnFilter:!1,enableSorting:!1,cell:({row:s})=>{var a;const l=(a=s.original.device)==null?void 0:a.name;return i("div",{class:"w-20 flex space-x-2"},[i("span",{class:" font-medium"},l)])}},{accessorKey:"table",header:({column:s})=>i(y,{column:s,title:"Table",class:"max-w-[200px]"}),enableColumnFilter:!1,enableSorting:!1,cell:({row:s})=>{var a;const l=(a=s.original.table)==null?void 0:a.name;return i("div",{class:"w-20 flex space-x-2"},[i("span",{class:" font-medium"},l)])}},{accessorKey:"guest_count",header:({column:s})=>i(y,{column:s,title:"Guests",class:"max-w-[200px]"}),enableColumnFilter:!1,enableSorting:!1,cell:({row:s})=>i("div",{class:"w-20 flex space-x-2"},[i("span",{class:" font-medium"},s.getValue("guest_count"))])},{accessorKey:"total_amount",header:({column:s})=>i(y,{column:s,title:"Total",class:"max-w-[200px]"}),enableColumnFilter:!1,enableSorting:!1,cell:({row:s})=>{const l=s.original.items.reduce((a,o)=>a+(o==null?void 0:o.price)*o.quantity+(o==null?void 0:o.tax),0);return i("div",{class:"w-20 flex space-x-2"},[i("span",{class:" font-medium"},ae(l))])}},{accessorKey:"status",header:({column:s})=>i(y,{column:s,title:"Status",class:"max-w-[200px]"}),enableColumnFilter:!1,enableSorting:!1,cell:({row:s})=>i("div",{class:"w-20 flex space-x-2"},[i("span",{class:" font-medium"},s.getValue("status"))])},{accessorKey:"is_printed",header:({column:s})=>i(y,{column:s,title:"Printed",class:"max-w-[200px]"}),enableColumnFilter:!1,enableSorting:!1,cell:({row:s})=>i("div",{class:"w-20 flex space-x-2"},[i("span",{class:" font-medium"},s.getValue("is_printed")?"Yes":"No")])},{accessorKey:"id",header:({column:s})=>i(y,{column:s,title:""}),enableColumnFilter:!1,enableSorting:!1,cell:({row:s})=>i(He,{row:s})}],Be={class:"flex items-center justify-between px-2"},Ge={class:"flex-1 text-sm text-muted-foreground"},ze={class:"flex items-center space-x-6 lg:space-x-8"},Je={class:"flex items-center space-x-2"},Ye={class:"flex w-[100px] items-center justify-center text-sm font-medium"},Qe={class:"flex items-center space-x-2"},We=h({__name:"DataTablePagination",props:{table:{}},setup(s){return(l,a)=>(d(),g("div",Be,[c("div",Ge,w(l.table.getFilteredSelectedRowModel().rows.length)+" of "+w(l.table.getFilteredRowModel().rows.length)+" row(s) selected. ",1),c("div",ze,[c("div",Je,[a[4]||(a[4]=c("p",{class:"text-sm font-medium"}," Rows per page ",-1)),t(e(Pe),{"model-value":`${l.table.getState().pagination.pageSize}`,"onUpdate:modelValue":l.table.setPageSize},{default:n(()=>[t(e(Fe),{class:"h-8 w-[70px]"},{default:n(()=>[t(e(Ve),{placeholder:`${l.table.getState().pagination.pageSize}`},null,8,["placeholder"])]),_:1}),t(e(Re),{side:"top"},{default:n(()=>[(d(),g($,null,S([10,20,30,40,50],o=>t(e(De),{key:o,value:`${o}`},{default:n(()=>[_(w(o),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["model-value","onUpdate:modelValue"])]),c("div",Ye," Page "+w(l.table.getState().pagination.pageIndex+1)+" of "+w(l.table.getPageCount()),1),c("div",Qe,[t(e(b),{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex",disabled:!l.table.getCanPreviousPage(),onClick:a[0]||(a[0]=o=>l.table.setPageIndex(0))},{default:n(()=>[a[5]||(a[5]=c("span",{class:"sr-only"},"Go to first page",-1)),t(e(ne),{class:"h-4 w-4"})]),_:1},8,["disabled"]),t(e(b),{variant:"outline",class:"h-8 w-8 p-0",disabled:!l.table.getCanPreviousPage(),onClick:a[1]||(a[1]=o=>l.table.previousPage())},{default:n(()=>[a[6]||(a[6]=c("span",{class:"sr-only"},"Go to previous page",-1)),t(e(Ie),{class:"h-4 w-4"})]),_:1},8,["disabled"]),t(e(b),{variant:"outline",class:"h-8 w-8 p-0",disabled:!l.table.getCanNextPage(),onClick:a[2]||(a[2]=o=>l.table.nextPage())},{default:n(()=>[a[7]||(a[7]=c("span",{class:"sr-only"},"Go to next page",-1)),t(e(Me),{class:"h-4 w-4"})]),_:1},8,["disabled"]),t(e(b),{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex",disabled:!l.table.getCanNextPage(),onClick:a[3]||(a[3]=o=>l.table.setPageIndex(l.table.getPageCount()-1))},{default:n(()=>[a[8]||(a[8]=c("span",{class:"sr-only"},"Go to last page",-1)),t(e(oe),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])]))}}),Xe={class:"flex flex-row flex-wrap justify-between gap-2"},Ze={class:"flex flex-row flex-wrap gap-2"},et=h({__name:"DataTableToolbar",props:{table:{}},setup(s){const l=s,a=M(()=>l.table.getState().columnFilters.length>0);return(o,p)=>{var r;return d(),g("div",Xe,[c("div",Ze,[t(e(Oe),{placeholder:"Filter Orders...","model-value":((r=o.table.getColumn("order_number"))==null?void 0:r.getFilterValue())??"",class:"h-8 w-[150px] lg:w-[250px]",onInput:p[0]||(p[0]=m=>{var f;return(f=o.table.getColumn("name"))==null?void 0:f.setFilterValue(m.target.value)})},null,8,["model-value"]),a.value?(d(),v(e(b),{key:0,variant:"outline",class:"h-8 px-2 lg:px-3 flex justify-between items-center",onClick:p[1]||(p[1]=m=>o.table.resetColumnFilters())},{default:n(()=>[t(e(re),{class:"text-green h-3 w-3"})]),_:1})):H("",!0)]),p[2]||(p[2]=c("div",{class:"flex flex-row flex-wrap gap-2"},null,-1))])}}}),tt={class:"space-y-4"},st={class:"rounded-md border"},j=h({__name:"DataTable",props:{columns:{},data:{}},setup(s){const l=s,a=k([]),o=k([]),p=k({}),r=k({}),m=_e({get data(){return l.data},get columns(){return l.columns},state:{get sorting(){return a.value},get columnFilters(){return o.value},get columnVisibility(){return p.value},get rowSelection(){return r.value}},enableRowSelection:!0,onSortingChange:f=>F(f,a),onColumnFiltersChange:f=>F(f,o),onColumnVisibilityChange:f=>F(f,p),onRowSelectionChange:f=>F(f,r),getCoreRowModel:$e(),getFilteredRowModel:ye(),getPaginationRowModel:xe(),getSortedRowModel:be(),getFacetedRowModel:we(),getFacetedUniqueValues:ve()});return(f,u)=>(d(),g("div",tt,[t(et,{table:e(m)},null,8,["table"]),c("div",st,[t(e(Ce),null,{default:n(()=>[t(e(he),null,{default:n(()=>[(d(!0),g($,null,S(e(m).getHeaderGroups(),C=>(d(),v(e(I),{key:C.id},{default:n(()=>[(d(!0),g($,null,S(C.headers,x=>(d(),v(e(ke),{key:x.id},{default:n(()=>[x.isPlaceholder?H("",!0):(d(),v(e(K),{key:0,render:x.column.columnDef.header,props:x.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),t(e(Se),null,{default:n(()=>{var C;return[(C=e(m).getRowModel().rows)!=null&&C.length?(d(!0),g($,{key:0},S(e(m).getRowModel().rows,x=>(d(),v(e(I),{key:x.id,"data-state":x.getIsSelected()&&"selected"},{default:n(()=>[(d(!0),g($,null,S(x.getVisibleCells(),R=>(d(),v(e(N),{key:R.id},{default:n(()=>[t(e(K),{render:R.column.columnDef.cell,props:R.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1032,["data-state"]))),128)):(d(),v(e(I),{key:1},{default:n(()=>[t(e(N),{colspan:f.columns.length,class:"h-24 text-center"},{default:n(()=>[...u[0]||(u[0]=[_(" No results. ",-1)])]),_:1},8,["colspan"])]),_:1}))]}),_:1})]),_:1})]),t(We,{table:e(m)},null,8,["table"])]))}}),Ot=h({__name:"Index",props:{title:{},description:{},orders:{},orderHistory:{}},setup(s){const l=[{title:"Orders",href:route("orders.index")}],o=Y().props.auth.user,p=(r,m=!1)=>{console.log("Order event received:",r,"Is update:",m),setTimeout(()=>{V.visit(route("orders.index"))},50)};return Q(()=>{if(!window.Echo){console.error("Display.vue: window.Echo is not available.");return}o.is_admin&&(console.log("Display.vue mounted. Joining channels."),window.Echo.channel("admin.orders").listen(".order.created",r=>p(r,!1)).listen(".order.completed",r=>p(r,!0)).listen(".order.voided",r=>p(r,!0)).error(r=>{console.error("Error connecting to admin.orders channel:",r)}),window.Echo.channel("admin.service-requests").listen(".service-request.notification",r=>{console.log(r)}).error(r=>{console.error("Error connecting to admin.service-requests channel:",r)}))}),W(()=>{window.Echo&&console.log("Display.vue unmounted. Leaving channels.")}),(r,m)=>(d(),g($,null,[t(e(X),{title:r.title,description:r.description},null,8,["title","description"]),t(te,{breadcrumbs:l},{default:n(()=>[t(e(Te),{"default-value":"live_orders",class:""},{default:n(()=>[t(e(Ae),{class:"grid w-full grid-cols-2"},{default:n(()=>[t(e(q),{value:"live_orders"},{default:n(()=>[...m[0]||(m[0]=[_(" Live Orders ",-1)])]),_:1}),t(e(q),{value:"order_history"},{default:n(()=>[...m[1]||(m[1]=[_(" Order History ",-1)])]),_:1})]),_:1}),t(e(U),{value:"live_orders",class:"p-2"},{default:n(()=>[t(j,{data:r.orders,columns:e(L)},null,8,["data","columns"])]),_:1}),t(e(U),{value:"order_history",class:"p-2"},{default:n(()=>[t(j,{data:r.orderHistory,columns:e(L)},null,8,["data","columns"])]),_:1})]),_:1}),m[2]||(m[2]=c("div",{class:"flex h-full flex-1 flex-col bg-white gap-4 rounded p-6"},null,-1))]),_:1})],64))}});export{Ot as default};
