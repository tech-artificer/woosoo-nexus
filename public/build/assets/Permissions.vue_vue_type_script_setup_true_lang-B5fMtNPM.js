import{d as B,I as C,e as F,r as k,G as z,n as R,f as U,x as $,o as l,w as a,a as o,u as e,B as n,b as u,c as m,F as b,A as v,C as p,H as j}from"./app-Ck0_Oz6D.js";import{a as E,b as M,c as T,_ as A}from"./CardTitle.vue_vue_type_script_setup_true_lang-D5YFjQCl.js";import{_ as D}from"./CardDescription.vue_vue_type_script_setup_true_lang-uSEyFb8E.js";import{_ as G,a as H,b as I,c as L,d as q}from"./SelectValue.vue_vue_type_script_setup_true_lang-w7OKlDAx.js";import{_ as J}from"./SelectGroup.vue_vue_type_script_setup_true_lang-FjtTC0GT.js";import{_ as K}from"./SelectLabel.vue_vue_type_script_setup_true_lang-BUxOdxkD.js";import{_ as O}from"./index-DrcL8KoG.js";import{_ as Q}from"./Switch.vue_vue_type_script_setup_true_lang-DxeYj4bw.js";import{_ as w}from"./Label.vue_vue_type_script_setup_true_lang-D3RFqliM.js";import{t as h}from"./index-LxG5FLxo.js";const W={class:"flex flex-col md:flex-row md:items-center gap-4"},X={key:0,class:"grid gap-8"},Y={class:"text-lg font-semibold capitalize text-gray-700 dark:text-gray-200 flex items-center"},Z={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},N={class:"text-xs text-gray-500 dark:text-gray-400"},ss={class:"sticky bottom-4 flex justify-end"},es={key:1,class:""},fs=B({__name:"Permissions",setup(as){const f=C(),g=F({roles:f.props.roles,permissions:f.props.permissions,groupedPermissions:f.props.groupedPermissions,assignedPermissions:f.props.assignedPermissions}),i=k(),d=k([]),_=z({permissions:[]}),x=R(()=>_.processing),P=()=>{i.value&&(_.permissions=d.value,_.post(route("roles.permissions.update",i.value.id),{onSuccess:r=>{h.success(`Successfully updated permissions for '${i.value}'.`),console.log(r)},onError:()=>h.error(`Failed to update permissions for '${i.value}'.`)}))},V=(r,s)=>{console.log(s),s?d.value.includes(r)||(d.value.push(r),console.log(r)):d.value=d.value.filter(t=>t!==r)};return U(i,r=>{if(r){const s=g.assignedPermissions[r.name]||[];d.value=[...s]}else d.value=[]}),(r,s)=>(l(),$(e(A),{class:"border-0"},{default:a(()=>[o(e(E),{class:"text-center6 border-b border-gray-200 dark:border-gray-700"},{default:a(()=>[o(e(M),{class:"text-3xl font-body font-semibold border-0"},{default:a(()=>[...s[1]||(s[1]=[n(" Roles & Permissions ",-1)])]),_:1}),o(e(D),{class:"text-muted-foreground"},{default:a(()=>[...s[2]||(s[2]=[n(" Manage what each role can access across the system. ",-1)])]),_:1})]),_:1}),o(e(T),{class:"space-y-8 pt-3"},{default:a(()=>[u("div",W,[o(e(w),{htmlFor:"role-select",class:"text-base font-semibold text-gray-700 dark:text-gray-300"},{default:a(()=>[...s[3]||(s[3]=[n(" Select a Role ",-1)])]),_:1}),o(e(G),{modelValue:i.value,"onUpdate:modelValue":s[0]||(s[0]=t=>i.value=t)},{default:a(()=>[o(e(H),{class:"w-full md:w-[240px] bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-lg"},{default:a(()=>[o(e(I),{placeholder:"Choose a role"})]),_:1}),o(e(L),{class:"bg-white dark:bg-gray-700 rounded-lg shadow-lg"},{default:a(()=>[o(e(J),null,{default:a(()=>[o(e(K),null,{default:a(()=>[...s[4]||(s[4]=[n("Roles",-1)])]),_:1}),(l(!0),m(b,null,v(g.roles,t=>(l(),$(e(q),{key:t.id,value:t,class:"capitalize"},{default:a(()=>[n(p(t.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),i.value?(l(),m("div",X,[(l(!0),m(b,null,v(g.groupedPermissions,(t,y)=>(l(),m("div",{key:y,class:"space-y-3"},[u("h3",Y,[s[5]||(s[5]=u("span",{class:"w-2 h-2 rounded-full bg-accent mr-2"},null,-1)),n(" "+p(y),1)]),u("div",Z,[(l(!0),m(b,null,v(t,c=>(l(),m("div",{key:c.id,class:"flex flex-row items-center justify-between p-4 bg-gray-100 dark:bg-gray-700 rounded-xl border border-transparent hover:border-woosoo-primary-light transition"},[u("div",null,[o(e(w),{for:`permission-${c.id}`,class:"text-sm font-medium text-gray-700 dark:text-gray-200 capitalize"},{default:a(()=>[n(p(c.label),1)]),_:2},1032,["for"]),u("p",N,p(c.guard_name),1)]),o(e(Q),{id:`permission-${c.id}`,"model-value":d.value.includes(c.name),"onUpdate:modelValue":S=>V(c.name,S),disabled:x.value,class:"scale-110"},null,8,["id","model-value","onUpdate:modelValue","disabled"])]))),128))])]))),128)),u("div",ss,[o(e(O),{onClick:j(P,["prevent"]),disabled:x.value,variant:"default",class:"px-6 py-3 rounded cursor-pointer border-1 border-woosoo-accent bg-woosoo-primary-light hover:bg-woosoo-primary-dark hover:text-woosoo-white transition"},{default:a(()=>[...s[6]||(s[6]=[n(" Save Changes ",-1)])]),_:1},8,["disabled"])])])):(l(),m("div",es,[...s[7]||(s[7]=[u("p",{class:""}," Please select a role to manage its permissions.",-1)])]))]),_:1})]),_:1}))}});export{fs as _};
