import{d as y,c as f,o as d,a as t,w as n,u as e,b as c,x as w,C as v,B as _,v as O,n as I,F as C,A as S,r as k,J as V,K as i,y as U,I as G,i as z,k as H,h as J}from"./app-DAf1zWRD.js";import{_ as q,C as Y,a as L,b as P,c as j,d as B,k as Q,A as W}from"./AppLayout-Csl4pRhI.js";import{_ as T}from"./Checkbox.vue_vue_type_script_setup_true_lang-B7cABLnr.js";import{c as X,f as Z,v as F}from"./utils-CnVfeQtM.js";import{c as ee,_ as b}from"./index-Cg1b5hy9.js";import{A as E,a as A,C as te,b as se,R as ae}from"./refresh-ccw-BKpIB5Kf.js";import{a as le,b as ne,c as oe,d as re,_ as ie}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-oaTqGkXE.js";import{_ as de}from"./DialogFooter.vue_vue_type_script_setup_true_lang-UUXCP6yT.js";import{t as D}from"./index-62d_Tfgr.js";import{_ as ue}from"./_plugin-vue_export-helper-Dx4HlVA9.js";import{E as ce}from"./ellipsis-xaS2Rh0u.js";import{u as me,F as K,g as pe,a as fe,b as ge,c as _e,d as we,e as ve}from"./index-D2uwafdV.js";import{d as be,_ as xe,a as he,c as N,b as M,e as Ce}from"./TableHeader.vue_vue_type_script_setup_true_lang-_ysRRsak.js";import{_ as $e,a as ye,b as Se,c as ke,d as Pe}from"./SelectValue.vue_vue_type_script_setup_true_lang-B1eNz0Lh.js";import{C as Fe}from"./chevron-left-CqsTwZAO.js";import{C as Ve}from"./chevron-right-D6-yaF3S.js";import{_ as Re}from"./Input.vue_vue_type_script_setup_true_lang-BQc-gUjL.js";import"./index-DEeNC21D.js";import"./createContext-DwAQl7c_.js";import"./Primitive-CxYRISpk.js";import"./VisuallyHidden-foQ1IPpE.js";import"./useForwardExpose-2ULF0Orn.js";import"./AvatarImage.vue_vue_type_script_setup_true_lang-BBdAuUDG.js";import"./Collection-CpVA6ZPK.js";import"./PopperContent-BopXsbar.js";import"./useTypeahead-BggFcQep.js";import"./RovingFocusGroup-DW6CEjbZ.js";import"./check-MUjTv9LS.js";import"./RovingFocusItem-Be5_K-_o.js";import"./VisuallyHiddenInput-ED9Ilcfj.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=ee("PrinterIcon",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),Me={inheritAttrs:!1},h=y({...Me,__name:"DataTableColumnHeader",props:{column:{},title:{}},setup(s){return(l,a)=>l.column.getCanSort()?(d(),f("div",{key:0,class:O(e(X)("flex items-center space-x-2",l.$attrs.class??""))},[t(e(B),null,{default:n(()=>[t(e(q),{"as-child":""},{default:n(()=>[t(e(b),{variant:"ghost",size:"sm",class:"-ml-3 h-8 data-[state=open]:bg-accent"},{default:n(()=>[c("span",null,v(l.title),1),l.column.getIsSorted()==="desc"?(d(),w(e(E),{key:0,class:"ml-2 h-4 w-4"})):l.column.getIsSorted()==="asc"?(d(),w(e(A),{key:1,class:"ml-2 h-4 w-4"})):(d(),w(e(Y),{key:2,class:"ml-2 h-4 w-4"}))]),_:1})]),_:1}),t(e(L),{align:"start"},{default:n(()=>[t(e(P),{onClick:a[0]||(a[0]=o=>l.column.toggleSorting(!1))},{default:n(()=>[t(e(A),{class:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),a[2]||(a[2]=_(" Asc ",-1))]),_:1}),t(e(P),{onClick:a[1]||(a[1]=o=>l.column.toggleSorting(!0))},{default:n(()=>[t(e(E),{class:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),a[3]||(a[3]=_(" Desc ",-1))]),_:1}),t(e(j))]),_:1})]),_:1})],2)):(d(),f("div",{key:1,class:O(l.$attrs.class)},v(l.title),3))}}),Ie={class:"ticket-container print-only"},Oe={class:"text-xs leading-tight"},Te={class:"text-xs leading-snug"},Ee=y({__name:"KitchenTicket",props:{itemData:{type:Object,required:!0}},setup(s){const l=s;return I(()=>{if(l.itemData.time_sent){const a=l.itemData.time_sent.split(":");return`${a[0]}:${a[1]}`}return""}),(a,o)=>(d(),f("div",Ie,[c("div",Oe,[(d(!0),f(C,null,S(s.itemData,m=>(d(),f("div",null," ("+v(m.quantity)+") "+v(m.name),1))),256))]),c("div",Te,[o[0]||(o[0]=c("p",{class:"font-bold"},"** ITEM NOTES:",-1)),c("p",null,v(s.itemData.note||"(No special requests/notes)"),1)])]))}}),Ae=ue(Ee,[["__scopeId","data-v-aa432f3a"]]),Ke=y({__name:"DataTableRowActions",props:{row:{}},setup(s){const l=s,a=I(()=>({...l.row.original})),o=k(!1),m=()=>{V.delete(`/orders/${a.value.id}`,{onSuccess:()=>{o.value=!1,D.success("Order Voided")}})},r=p=>{V.post("/orders/print",{order_id:p},{onSuccess:()=>{D.success("Order Sent to Printer")}})},g=p=>{V.post("/orders/complete",{order_id:p},{onSuccess:()=>{D.success("Order Completed")}})};return(p,u)=>(d(),f(C,null,[t(e(B),null,{default:n(()=>[t(e(q),{"as-child":""},{default:n(()=>[t(e(b),{variant:"ghost",class:"h-8 w-8 p-0"},{default:n(()=>[u[2]||(u[2]=c("span",{class:"sr-only"},"Open menu",-1)),t(e(ce),{class:"h-4 w-4"})]),_:1})]),_:1}),t(e(L),{align:"end"},{default:n(()=>[t(e(Q),null,{default:n(()=>[...u[3]||(u[3]=[_("Actions",-1)])]),_:1}),t(e(P),{onClick:u[0]||(u[0]=$=>r(a.value.order_id))},{default:n(()=>[...u[4]||(u[4]=[_(" Print ",-1)])]),_:1}),t(e(P),{onClick:u[1]||(u[1]=$=>g(a.value.order_id))},{default:n(()=>[...u[5]||(u[5]=[_(" Complete ",-1)])]),_:1}),t(e(j)),t(e(P),{onClick:m},{default:n(()=>[...u[6]||(u[6]=[_(" Void ",-1)])]),_:1})]),_:1})]),_:1}),t(e(ie),null,{default:n(()=>[t(e(le),{"as-child":""},{default:n(()=>[t(e(b),{variant:"ghost",class:"p-1"},{default:n(()=>[t(e(De))]),_:1})]),_:1}),t(e(ne),{class:"w-fit"},{default:n(()=>[t(e(oe),{class:"sr-only","aria-describedby":"kitchen-ticket"},{default:n(()=>[...u[7]||(u[7]=[_("Kitchen Ticket",-1)])]),_:1}),t(e(re),null,{default:n(()=>[...u[8]||(u[8]=[_("Print Order Items",-1)])]),_:1}),c("div",null,[t(Ae,{"item-data":a.value.items},null,8,["item-data"])]),t(e(de),null,{default:n(()=>[t(e(b),null,{default:n(()=>[...u[9]||(u[9]=[_("Print",-1)])]),_:1})]),_:1})]),_:1})]),_:1})],64))}}),Ne=[{id:"select",header:({table:s})=>i(T,{modelValue:s.getIsAllPageRowsSelected()||s.getIsSomePageRowsSelected()&&"indeterminate","onUpdate:modelValue":l=>s.toggleAllPageRowsSelected(!!l),ariaLabel:"Select all",class:"translate-y-0.5 flex space-x-2"}),cell:({row:s})=>i(T,{modelValue:s.getIsSelected(),"onUpdate:modelValue":l=>s.toggleSelected(!!l),ariaLabel:"Select row",class:"translate-y-0.5"})},{accessorKey:"order_number",header:({column:s})=>i(h,{column:s,title:"Order #",class:"w-[100px]"}),cell:({row:s})=>i("div",{class:"flex space-x-2"},[i("span",{class:" font-medium"},s.getValue("order_number"))])},{accessorKey:"device",header:({column:s})=>i(h,{column:s,title:"Device",class:"max-w-[100px]"}),enableColumnFilter:!1,enableSorting:!1,cell:({row:s})=>{var a;const l=(a=s.original.device)==null?void 0:a.name;return i("div",{class:"w-20 flex space-x-2"},[i("span",{class:" font-medium"},l)])}},{accessorKey:"table",header:({column:s})=>i(h,{column:s,title:"Table",class:"max-w-[200px]"}),enableColumnFilter:!1,enableSorting:!1,cell:({row:s})=>{var a;const l=(a=s.original.table)==null?void 0:a.name;return i("div",{class:"w-20 flex space-x-2"},[i("span",{class:" font-medium"},l)])}},{accessorKey:"guest_count",header:({column:s})=>i(h,{column:s,title:"Guests",class:"max-w-[200px]"}),enableColumnFilter:!1,enableSorting:!1,cell:({row:s})=>i("div",{class:"w-20 flex space-x-2"},[i("span",{class:" font-medium"},s.getValue("guest_count"))])},{accessorKey:"total_amount",header:({column:s})=>i(h,{column:s,title:"Total",class:"max-w-[200px]"}),enableColumnFilter:!1,enableSorting:!1,cell:({row:s})=>{const l=s.original.items.reduce((a,o)=>a+(o==null?void 0:o.price)*o.quantity+(o==null?void 0:o.tax),0);return i("div",{class:"w-20 flex space-x-2"},[i("span",{class:" font-medium"},Z(l))])}},{accessorKey:"status",header:({column:s})=>i(h,{column:s,title:"Status",class:"max-w-[200px]"}),enableColumnFilter:!1,enableSorting:!1,cell:({row:s})=>i("div",{class:"w-20 flex space-x-2"},[i("span",{class:" font-medium"},s.getValue("status"))])},{accessorKey:"is_printed",header:({column:s})=>i(h,{column:s,title:"Printed",class:"max-w-[200px]"}),enableColumnFilter:!1,enableSorting:!1,cell:({row:s})=>i("div",{class:"w-20 flex space-x-2"},[i("span",{class:" font-medium"},s.getValue("is_printed")?"Yes":"No")])},{accessorKey:"id",header:({column:s})=>i(h,{column:s,title:""}),enableColumnFilter:!1,enableSorting:!1,cell:({row:s})=>i(Ke,{row:s})}],Ue={class:"flex items-center justify-between px-2"},qe={class:"flex-1 text-sm text-muted-foreground"},Le={class:"flex items-center space-x-6 lg:space-x-8"},je={class:"flex items-center space-x-2"},Be={class:"flex w-[100px] items-center justify-center text-sm font-medium"},Ge={class:"flex items-center space-x-2"},ze=y({__name:"DataTablePagination",props:{table:{}},setup(s){return(l,a)=>(d(),f("div",Ue,[c("div",qe,v(l.table.getFilteredSelectedRowModel().rows.length)+" of "+v(l.table.getFilteredRowModel().rows.length)+" row(s) selected. ",1),c("div",Le,[c("div",je,[a[4]||(a[4]=c("p",{class:"text-sm font-medium"}," Rows per page ",-1)),t(e($e),{"model-value":`${l.table.getState().pagination.pageSize}`,"onUpdate:modelValue":l.table.setPageSize},{default:n(()=>[t(e(ye),{class:"h-8 w-[70px]"},{default:n(()=>[t(e(Se),{placeholder:`${l.table.getState().pagination.pageSize}`},null,8,["placeholder"])]),_:1}),t(e(ke),{side:"top"},{default:n(()=>[(d(),f(C,null,S([10,20,30,40,50],o=>t(e(Pe),{key:o,value:`${o}`},{default:n(()=>[_(v(o),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["model-value","onUpdate:modelValue"])]),c("div",Be," Page "+v(l.table.getState().pagination.pageIndex+1)+" of "+v(l.table.getPageCount()),1),c("div",Ge,[t(e(b),{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex",disabled:!l.table.getCanPreviousPage(),onClick:a[0]||(a[0]=o=>l.table.setPageIndex(0))},{default:n(()=>[a[5]||(a[5]=c("span",{class:"sr-only"},"Go to first page",-1)),t(e(te),{class:"h-4 w-4"})]),_:1},8,["disabled"]),t(e(b),{variant:"outline",class:"h-8 w-8 p-0",disabled:!l.table.getCanPreviousPage(),onClick:a[1]||(a[1]=o=>l.table.previousPage())},{default:n(()=>[a[6]||(a[6]=c("span",{class:"sr-only"},"Go to previous page",-1)),t(e(Fe),{class:"h-4 w-4"})]),_:1},8,["disabled"]),t(e(b),{variant:"outline",class:"h-8 w-8 p-0",disabled:!l.table.getCanNextPage(),onClick:a[2]||(a[2]=o=>l.table.nextPage())},{default:n(()=>[a[7]||(a[7]=c("span",{class:"sr-only"},"Go to next page",-1)),t(e(Ve),{class:"h-4 w-4"})]),_:1},8,["disabled"]),t(e(b),{variant:"outline",class:"hidden h-8 w-8 p-0 lg:flex",disabled:!l.table.getCanNextPage(),onClick:a[3]||(a[3]=o=>l.table.setPageIndex(l.table.getPageCount()-1))},{default:n(()=>[a[8]||(a[8]=c("span",{class:"sr-only"},"Go to last page",-1)),t(e(se),{class:"h-4 w-4"})]),_:1},8,["disabled"])])])]))}}),He={class:"flex flex-row flex-wrap justify-between gap-2"},Je={class:"flex flex-row flex-wrap gap-2"},Ye=y({__name:"DataTableToolbar",props:{table:{}},setup(s){const l=s,a=I(()=>l.table.getState().columnFilters.length>0);return(o,m)=>{var r;return d(),f("div",He,[c("div",Je,[t(e(Re),{placeholder:"Filter Orders...","model-value":((r=o.table.getColumn("order_number"))==null?void 0:r.getFilterValue())??"",class:"h-8 w-[150px] lg:w-[250px]",onInput:m[0]||(m[0]=g=>{var p;return(p=o.table.getColumn("name"))==null?void 0:p.setFilterValue(g.target.value)})},null,8,["model-value"]),a.value?(d(),w(e(b),{key:0,variant:"outline",class:"h-8 px-2 lg:px-3 flex justify-between items-center",onClick:m[1]||(m[1]=g=>o.table.resetColumnFilters())},{default:n(()=>[t(e(ae),{class:"text-green h-3 w-3"})]),_:1})):U("",!0)]),m[2]||(m[2]=c("div",{class:"flex flex-row flex-wrap gap-2"},null,-1))])}}}),Qe={class:"space-y-4"},We={class:"rounded-md border"},Xe=y({__name:"DataTable",props:{columns:{},data:{}},setup(s){const l=s,a=k([]),o=k([]),m=k({}),r=k({}),g=me({get data(){return l.data},get columns(){return l.columns},state:{get sorting(){return a.value},get columnFilters(){return o.value},get columnVisibility(){return m.value},get rowSelection(){return r.value}},enableRowSelection:!0,onSortingChange:p=>F(p,a),onColumnFiltersChange:p=>F(p,o),onColumnVisibilityChange:p=>F(p,m),onRowSelectionChange:p=>F(p,r),getCoreRowModel:ve(),getFilteredRowModel:we(),getPaginationRowModel:_e(),getSortedRowModel:ge(),getFacetedRowModel:fe(),getFacetedUniqueValues:pe()});return(p,u)=>(d(),f("div",Qe,[t(Ye,{table:e(g)},null,8,["table"]),c("div",We,[t(e(be),null,{default:n(()=>[t(e(xe),null,{default:n(()=>[(d(!0),f(C,null,S(e(g).getHeaderGroups(),$=>(d(),w(e(M),{key:$.id},{default:n(()=>[(d(!0),f(C,null,S($.headers,x=>(d(),w(e(Ce),{key:x.id},{default:n(()=>[x.isPlaceholder?U("",!0):(d(),w(e(K),{key:0,render:x.column.columnDef.header,props:x.getContext()},null,8,["render","props"]))]),_:2},1024))),128))]),_:2},1024))),128))]),_:1}),t(e(he),null,{default:n(()=>{var $;return[($=e(g).getRowModel().rows)!=null&&$.length?(d(!0),f(C,{key:0},S(e(g).getRowModel().rows,x=>(d(),w(e(M),{key:x.id,"data-state":x.getIsSelected()&&"selected"},{default:n(()=>[(d(!0),f(C,null,S(x.getVisibleCells(),R=>(d(),w(e(N),{key:R.id},{default:n(()=>[t(e(K),{render:R.column.columnDef.cell,props:R.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1032,["data-state"]))),128)):(d(),w(e(M),{key:1},{default:n(()=>[t(e(N),{colspan:p.columns.length,class:"h-24 text-center"},{default:n(()=>[...u[0]||(u[0]=[_(" No results. ",-1)])]),_:1},8,["colspan"])]),_:1}))]}),_:1})]),_:1})]),t(ze,{table:e(g)},null,8,["table"])]))}}),Ze={class:"flex h-full flex-1 flex-col bg-white gap-4 rounded p-6"},Rt=y({__name:"Index",props:{title:{},description:{},orders:{}},setup(s){const l=[{title:"Orders",href:route("orders.index")}],o=G().props.auth.user,m=(r,g=!1)=>{console.log(r),V.visit(route("orders.index"))};return z(()=>{if(!window.Echo){console.error("Display.vue: window.Echo is not available.");return}o.is_admin&&(window.Echo.channel("admin.orders").listen(".order.created",r=>m(r,!1)).listen(".order.completed",r=>m(r,!0)).listen(".order.voided",r=>m(r,!0)).error(r=>{console.error("Error connecting to admin.orders channel:",r)}),window.Echo.channel("admin.service-requests").listen(".service-request.notification",r=>{console.log(r)}).error(r=>{console.error("Error connecting to admin.orders channel:",r)}))}),H(()=>{window.Echo&&console.log("Display.vue unmounted. Leaving channels.")}),(r,g)=>(d(),f(C,null,[t(e(J),{title:r.title,description:r.description},null,8,["title","description"]),t(W,{breadcrumbs:l},{default:n(()=>[c("div",Ze,[t(Xe,{data:r.orders,columns:e(Ne)},null,8,["data","columns"])])]),_:1})],64))}});export{Rt as default};
