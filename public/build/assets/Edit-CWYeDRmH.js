import{d as L,r as d,G as M,i as B,x as O,o as f,w as t,a,u as e,b as i,c as v,y as h,B as u,C as y,H as R}from"./app-DAf1zWRD.js";import{c as D,_ as c}from"./index-Cg1b5hy9.js";import{_ as F}from"./Input.vue_vue_type_script_setup_true_lang-BQc-gUjL.js";import{_ as N}from"./InputError.vue_vue_type_script_setup_true_lang-Cnav00ix.js";import{_ as V}from"./Label.vue_vue_type_script_setup_true_lang-CW0Q_q-H.js";import{t as b}from"./index-62d_Tfgr.js";import{a as w,b as x,c as k,_ as W}from"./_plugin-vue_export-helper-Dx4HlVA9.js";import{_ as $,I as z}from"./TooltipProvider.vue_vue_type_script_setup_true_lang-C4ikEbim.js";import{a as I,b as P,c as T,d as A,_ as G}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-oaTqGkXE.js";import{_ as H,a as q}from"./DialogHeader.vue_vue_type_script_setup_true_lang-CPbF_01s.js";import"./Primitive-CxYRISpk.js";import"./utils-CnVfeQtM.js";import"./index-DEeNC21D.js";import"./useForwardExpose-2ULF0Orn.js";import"./VisuallyHidden-foQ1IPpE.js";import"./createContext-DwAQl7c_.js";import"./PopperContent-BopXsbar.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=D("PencilIcon",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),K={class:"flex justify-start mb-5"},Q={key:0,class:"flex justify-center"},X=["src"],Y={class:"grid gap-2"},Z=["value"],ee={class:"flex items-center justify-between gap-2 flex-row-reverse mt-5"},ae=L({__name:"Edit",props:{menu:{}},setup(C){const l=C,m=d(!1),r=d(l.menu.img_url),p=d([l.menu]),o=M({image:null}),U=()=>{m.value=!0};function j(_){var g;const s=_.target;if(!s||!((g=s.files)!=null&&g.length))return;const n=s.files[0];try{r.value=URL.createObjectURL(n),p.value[0].img_url=r.value}catch(S){console.error("Error while handling file change",S)}}function E(){o.post(route("menu.upload.image",{id:l.menu.id}),{forceFormData:!0,preserveScroll:!0,preserveState:!0,onSuccess:()=>{b("Image Uploaded:",{description:"The previous image has been replaced with your new upload.",action:{label:"Ok",variant:"success",onClick:()=>console.log("Ok")},duration:5e3,position:"top-right"}),m.value=!1},onError:()=>{b("An Error Occured",{description:"Something Went Wrong!",duration:5e3,position:"top-right"}),p.value[0].img_url=l.menu.img_url}})}return B(()=>()=>{r.value&&r.value.startsWith("blob:")&&URL.revokeObjectURL(r.value)}),(_,s)=>(f(),O(e(G),{open:m.value,"onUpdate:open":s[1]||(s[1]=n=>m.value=n)},{default:t(()=>[a(e($),{"delay-duration":100},{default:t(()=>[a(e(w),{class:""},{default:t(()=>[a(e(x),{"as-child":""},{default:t(()=>[a(e(I),{"as-child":""},{default:t(()=>[a(e(c),{variant:"ghost",class:"cursor-pointer",onClick:U},{default:t(()=>[a(e(z))]),_:1})]),_:1})]),_:1}),a(e(k),null,{default:t(()=>[...s[2]||(s[2]=[i("p",null,"Upload/Replace Image",-1)])]),_:1})]),_:1})]),_:1}),a(e($),{"delay-duration":100},{default:t(()=>[a(e(w),null,{default:t(()=>[a(e(x),{"as-child":""},{default:t(()=>[a(e(I),{"as-child":""},{default:t(()=>[a(e(c),{variant:"ghost",class:"cursor-pointer"},{default:t(()=>[a(e(J))]),_:1})]),_:1})]),_:1}),a(e(k),null,{default:t(()=>[...s[3]||(s[3]=[i("p",null,"Edit Menu",-1)])]),_:1})]),_:1})]),_:1}),a(e(P),{class:"sm:max-w-[600px]"},{default:t(()=>[a(e(H),{class:"flex flex-col gap-2 justify-start"},{default:t(()=>[i("div",K,[r.value?(f(),v("div",Q,[i("img",{src:r.value,class:"w-32 h-32 object-cover border rounded-lg",alt:"Menu Image"},null,8,X)])):h("",!0)]),a(e(T),null,{default:t(()=>[u(y(l.menu.name),1)]),_:1}),a(e(A),null,{default:t(()=>[...s[4]||(s[4]=[u(" Upload or replace the featured image for this menu item. ",-1)])]),_:1})]),_:1}),i("form",{onSubmit:R(E,["prevent"]),method:"put",class:"space-y-4"},[i("div",Y,[a(e(V),{for:"image",class:"text-woosoo-dark-gray"},{default:t(()=>[...s[5]||(s[5]=[u("Featured Image",-1)])]),_:1}),a(e(F),{id:"image",type:"file","v-model":e(o).image,accept:"image/*",onChange:j,onInput:s[0]||(s[0]=n=>e(o).image=n.target.files[0])},null,8,["v-model"]),e(o).progress?(f(),v("progress",{key:0,value:e(o).progress.percentage,max:"100"},y(e(o).progress.percentage)+"% ",9,Z)):h("",!0),a(N,{message:e(o).errors.image},null,8,["message"])]),i("div",ee,[a(e(c),{type:"submit",class:"hover:bg-woosoo-primary-light hover:text-woosoo-primary-dark bg-woosoo-accent cursor-pointer text-gray-100 w-50",disabled:e(o).processing},{default:t(()=>[...s[6]||(s[6]=[u(" Save Changes ",-1)])]),_:1},8,["disabled"]),a(e(q),{"as-child":""},{default:t(()=>[a(e(c),{type:"button",variant:"secondary",class:"cursor-pointer w-50"},{default:t(()=>[...s[7]||(s[7]=[u(" Close ",-1)])]),_:1})]),_:1})])],32)]),_:1})]),_:1},8,["open"]))}}),ye=W(ae,[["__scopeId","data-v-d455323c"]]);export{ye as default};
